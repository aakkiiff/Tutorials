pipeline {
    agent any

    stages {
        stage('CLEANUP WORKSPACE') {
            steps {
                script {
                    cleanWs()
                }
            }
        }
    }

    post {
        success {
            withCredentials([string(credentialsId: 'google_chat_token', variable: 'token')]) {
                hangoutsNotify(
                    message: """
                        <b><font color="#0F9D58">‚úÖ PIPELINE SUCCESS</font></b><br>
                        <b>Pipeline:</b> $env.JOB_NAME<br>
                        <b>Build Number:</b> $env.BUILD_NUMBER<br>
                        <b>Status:</b> <font color="#0F9D58">COMPLETED SUCCESSFULLY</font><br>
                        <i>Great job! üéâ</i>
                    """,
                    token: env.token
                )
            }
        }
        failure {
            withCredentials([string(credentialsId: 'google_chat_token', variable: 'token')]) {
                hangoutsNotify(
                    message: """
                        <b><font color="#EA4335">‚ùå PIPELINE FAILURE</font></b><br>
                        <b>Pipeline:</b> $env.JOB_NAME<br>
                        <b>Build Number:</b> $env.BUILD_NUMBER<br>
                        <b>Status:</b> <font color="#EA4335">FAILED</font><br>
                        <i>Please check the logs for details. üõ†Ô∏è</i>
                    """,
                    token: env.token
                )
            }
        }
    }
}
